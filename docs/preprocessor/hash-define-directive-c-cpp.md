---
title: '#ディレクティブ (C/C++)'
ms.date: 11/04/2016
f1_keywords:
- '#define'
helpviewer_keywords:
- define directive (#define), syntax
- preprocessor, directives
- define directive (#define)
- '#define directive, syntax'
- '#define directive'
ms.assetid: 33cf25c6-b24e-40bf-ab30-9008f0391710
ms.openlocfilehash: 8a0cc7e7836a0c82c72055fe8d9e7497995485d0
ms.sourcegitcommit: c7f90df497e6261764893f9cc04b5d1f1bf0b64b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/05/2019
ms.locfileid: "59039508"
---
# <a name="define-directive-cc"></a>#define ディレクティブ (C/C++)

**#Define**作成、*マクロ*、トークン文字列を識別子またはパラメーター化された識別子の関連付けであります。 マクロが定義されると、コンパイラはそれ以降にソース ファイル内に識別子が見つかるたびに、トークン文字列に置き換えることができます。

## <a name="syntax"></a>構文

`#define` *identifier* *token-string*<sub>opt</sub>

`#define` *identifier* `(` *identifier*<sub>opt</sub>`,` *...* `,` *identifier*<sub>opt</sub>`)` *token-string*<sub>opt</sub>

## <a name="remarks"></a>Remarks

**#Define**ディレクティブにより、コンパイラに置き換える*トークン文字列*出現するたびに*識別子*ソース ファイルにします。 *識別子*トークンをフォームの場合にのみが置き換えられます。 つまり、*識別子*コメント、または長い識別子の一部として、文字列内に表示される場合は置き換えられません。 詳細については、次を参照してください。[トークン](../cpp/tokens-cpp.md)します。

*トークン文字列*キーワード、定数、または完全なステートメントなど、トークンの一連の引数で構成されます。 1 つ以上の空白文字で区切る必要があります*トークン文字列*から*識別子*します。 この空白は、置き換えられるテキストの一部とは見なされません。最後のトークンのテキストに続く空白も同様です。

A`#define`せず、*トークン文字列*の出現を削除します*識別子*ソース ファイルから。 *識別子*は定義されているを使用してテストすることができます、`#if defined`と`#ifdef`ディレクティブ。

2 番目の構文形式は、パラメーターを受け取る関数に似たマクロを定義します。 この形式では、かっこで囲んだパラメーターのリストを使用できます (省略可能)。 マクロが、以降の各定義に出現する*識別子*(*識別子*<sub>opt</sub>,...,*識別子*<sub>opt</sub> ) のバージョンに置き換え、*トークン文字列*仮パラメーターの代わりに使用する実際の引数を持つ引数。

仮パラメーター名の表示で*トークン文字列*実際の値が置き換えられる場所をマークします。 各パラメーターの名前は内で複数回*トークン文字列*名前は任意の順序で表示できます。 呼び出しにある引数の数は、マクロ定義にあるパラメーターの数に一致する必要があります。 かっこを多めに使用することで、複雑な実引数が正しく解釈されるようにできます。

リスト内で仮パラメーターはコンマで区切ります。 リストの各名前は一意である必要があり、リストはかっこで囲む必要があります。 スペースを分離できますできません*識別子*し、開きかっこを入力します。 行の連結を使用して、-、円記号の配置 (`\`)、改行文字の直前に: 長いディレクティブに複数のソース行。 仮パラメーター名のスコープを終了する新しい行に拡張*トークン文字列*します。

マクロが 2 番目の構文形式で定義されると、それ以降の引数リストまでのテキスト インスタンスがマクロの呼び出しを示します。 インスタンスに続く実引数*識別子*ソース ファイル内のマクロ定義内の対応する仮パラメーターと照合されます。 各仮パラメーター*トークン文字列*文字列が前置されていない (`#`) 文字定数化、(`#@`)、またはトークン連結 (`##`) 演算子、または後ろにない、`##`演算子対応する実引数で置き換えられます。 ディレクティブが仮パラメーターを置き換える前に、実引数内のすべてのマクロが展開されます  (演算子が記載されて[プリプロセッサ演算子](../preprocessor/preprocessor-operators.md))。

引数を持つマクロの次の例の 2 番目の形式を示しています、 **#define**構文。

```C
// Macro to define cursor lines
#define CURSOR(top, bottom) (((top) << 8) | (bottom))

// Macro to get a random integer with a specified range
#define getrandom(min, max) \
    ((rand()%(int)(((max) + 1)-(min)))+ (min))
```

副作用のある引数が原因で、マクロが予期しない結果を生成することがあります。 同じ仮パラメーターの 1 つ以上の時間が表示される*トークン文字列*します。 その仮パラメーターが副作用のある式と置き換えられると、その式は、その副作用と共に、複数回評価される場合があります  (下の例を参照してください[トークン連結演算子 (##)](../preprocessor/token-pasting-operator-hash-hash.md)。)。

`#undef` ディレクティブは、識別子のプリプロセッサ定義を未定義の状態にします。 参照してください[#undef ディレクティブ](../preprocessor/hash-undef-directive-c-cpp.md)詳細についてはします。

定義されているマクロの名前が発生したかどうかは*トークン文字列*(でもマクロ展開) をもう 1 つ、結果として展開されていません。

1 秒あたり **#define**のと同じ名前のマクロでは、2 番目のトークン シーケンスが 1 つ目と同じでない限り、警告が生成されます。

**Microsoft 固有の仕様**

Microsoft C/C++ では、新しい定義が元の定義と構文的に同一の場合、マクロを再定義できます。 つまり、2 つの定義に異なるパラメーター名を付けることができます。 この動作は、2 つの定義が構文的に同一であることが必要ですが、ANSI C によって異なります。

たとえば、次の 2 つのマクロは、パラメーター名を除いて同一です。 ANSI C では、このような再定義することはできませんが、Microsoft C/C では、それをコンパイル エラーは発生しません。

```C
#define multiply( f1, f2 ) ( f1 * f2 )
#define multiply( a1, a2 ) ( a1 * a2 )
```

一方、次の 2 つのマクロは同一ではなく、Microsoft C/C++ で警告が生成されます。

```C
#define multiply( f1, f2 ) ( f1 * f2 )
#define multiply( a1, a2 ) ( b1 * b2 )
```

**END Microsoft 固有の仕様**

この例では、 **#define**ディレクティブ。

```C
#define WIDTH       80
#define LENGTH      ( WIDTH + 10 )
```

最初のステートメントは識別子 `WIDTH` を整数定数 80 として定義し、`LENGTH` と整数定数 10 に基づき `WIDTH` を定義します。 `LENGTH` は見つかるたびに (`WIDTH + 10`) に置き換えられます。 次に、`WIDTH + 10` は見つかるたびに式 (`80 + 10`) に置き換えられます。 `WIDTH + 10` を囲むかっこは、次のようなステートメントの解釈を制御するため重要です。

```C
var = LENGTH * 20;
```

プロプロセス段階が終了すると、ステートメントは次のようになります。

```C
var = ( 80 + 10 ) * 20;
```

1800 に評価されます。 かっこがない場合、結果は次のようになります。

```C
var = 80 + 10 * 20;
```

これは、280 に評価されます。

**Microsoft 固有の仕様**

マクロおよび定数の定義、 [/D](../build/reference/d-preprocessor-definitions.md)コンパイラ オプションが使用すると同じ効果を **#define**プリプロセス ディレクティブ、ファイルの先頭。 /D オプションを使用して最大 30 個のマクロを定義できます。

**END Microsoft 固有の仕様**

## <a name="see-also"></a>関連項目

[プリプロセッサ ディレクティブ](../preprocessor/preprocessor-directives.md)