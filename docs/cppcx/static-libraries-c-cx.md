---
title: スタティック ライブラリ (C++/CX)
ms.date: 02/03/2017
ms.assetid: 7faf53c8-fa21-42cc-8246-d32533ef9dfa
ms.openlocfilehash: 188ba06518bf6cdd154b7d6bd61216ed1e4ffad3
ms.sourcegitcommit: 18d3b1e9cdb4fc3a76f7a650c31994bdbd2bde64
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/29/2019
ms.locfileid: "64877242"
---
# <a name="static-libraries-ccx"></a>スタティック ライブラリ (C++/CX)

ユニバーサル Windows プラットフォーム (UWP) アプリで使用されている静的ライブラリ STL の型、および Windows ランタイム アプリのプラットフォームから除外されていない Win32 Api の呼び出しを含む、ISO 標準の C++ コードを含めることができます。 スタティック ライブラリは、Windows ランタイム コンポーネントを使用して、特定の制限の Windows ランタイム コンポーネントを作成します。

## <a name="creating-static-libraries"></a>スタティック ライブラリの作成


新しいプロジェクトを作成する方法については、インストールした Visual Studio のバージョンによって異なります。 バージョン セレクターで、適切なバージョンに設定して左上にあることを確認します。

::: moniker range="vs-2019"

### <a name="to-create-a-uwp-static-library-in-visual-studio-2019"></a>Visual Studio 2019 で UWP のスタティック ライブラリを作成するには

1. メニュー バーで、**ファイル** > **新規** > **プロジェクト**を開く、**新しいプロジェクトを作成** ダイアログ ボックス。

1. ダイアログ ボックスの上部にある次のように設定します**言語**に **C++** 設定**プラットフォーム**に**Windows**、設定と**プロジェクトの種類。** に**UWP**します。 

1. プロジェクトの種類の結果の一覧から選択**スタティック ライブラリ (ユニバーサル Windows - C++/CX)** 選択 **[次へ]** します。 次のページで、プロジェクトに名前を付けし、必要な場合は、プロジェクトの場所を指定します。

1. 選択、**作成**プロジェクトを作成するボタンをクリックします。

::: moniker-end

::: moniker range="<=vs-2017"

### <a name="to-create-a-uwp-static-library-in-visual-studio-2017-or-visual-studio-2015"></a>Visual Studio 2017 または Visual Studio 2015 で UWP のスタティック ライブラリを作成するには

1. メニュー バーで、**[ファイル]**  >  **[新規作成]**  >  **[プロジェクト]** を選択します。 **Visual C** > **Windows ユニバーサル**選択**スタティック ライブラリ (ユニバーサル Windows)** します。

1. **ソリューション エクスプローラー**で、プロジェクトのショートカット メニューを開き、 **[プロパティ]** をクリックします。 **プロパティ** ダイアログ ボックスで、**構成プロパティ** > **C/C++** 設定ページで、 **Windows ランタイム拡張機能の使用**に**はい (/ZW)** します。

::: moniker-end

UWP アプリの除外されている Win32 API の呼び出しを行った場合に新規のスタティック ライブラリをコンパイルするときに、コンパイラによってエラー C3861「識別子が見つかりません。」が発生します。 Windows ランタイムのサポートされている別の方法を探すを参照してください。 [UWP アプリでの Windows Api の代替](/uwp/win32-and-com/alternatives-to-windows-apis-uwp)します。

UWP アプリのソリューションに C++ スタティック ライブラリ プロジェクトを追加する場合は、UWP サポートのプロパティに設定するように、ライブラリ プロジェクトのプロパティの設定を更新する必要があります**はい**します。 この設定がないコードのビルドし、リンクについては、エラーが発生しようとすると、Microsoft Store のアプリを確認します。 スタティック ライブラリは、そのライブラリを利用するプロジェクトと同じコンパイラ設定でコンパイルする必要があります。

 `ref` パブリック クラス、パブリック インターフェイス クラス、またはパブリック値クラスを作成するスタティック ライブラリを使用すると、リンクは次の警告を出します。

> **警告 LNK4264:** をスタティック ライブラリに/ZW でコンパイルされたオブジェクト ファイルをアーカイブに、Windows ランタイム型を作成するときにお勧めしません Windows ランタイム メタデータを含むスタティック ライブラリとリンクを注意してください。

スタティック ライブラリは、ライブラリ自体の外部で使用される Windows ランタイム コンポーネントを生成していない場合にのみ、警告を無視してかまいません。 ライブラリが、自らが定義したコンポーネントを利用していない場合、パブリック メタデータに型情報が含まれている状況でも、リンカーは実装を最適化できます。 このことは、スタティック ライブラリ内のパブリック コンポーネントはコンパイルされるが、実行時にアクティブにならないことを意味します。 このため、ダイナミック リンク ライブラリ (DLL) で Windows ランタイム コンポーネントの消費量が想定されているその他のコンポーネントまたはアプリによってを実装する必要があります。

## <a name="see-also"></a>関連項目

[スレッドとマーシャリング](../cppcx/threading-and-marshaling-c-cx.md)
