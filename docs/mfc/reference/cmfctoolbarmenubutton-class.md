---
title: CMFCToolBarMenuButton クラス
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CompareWith
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CopyFrom
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateFromMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::EnableQuickCustomize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetCommands
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetImageRect
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPaletteRows
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HasButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HaveHotBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsClickedOnMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsDroppedDown
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsEmptyMenuAllowed
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsExclusive
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsQuickMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsTearOffMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnAfterCreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnBeforeDrag
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCalculateSize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCancelMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnChangeParentWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClick
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClickMenuItem
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnContextHelp
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDraw
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDrawOnCustomizeList
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OpenPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::ResetImageToDefault
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SaveBarState
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::Serialize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetACCData
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuOnly
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMessageWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetRadio
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetTearOff
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::DrawDocumentIcon
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw
helpviewer_keywords:
- CMFCToolBarMenuButton [MFC], CMFCToolBarMenuButton
- CMFCToolBarMenuButton [MFC], CompareWith
- CMFCToolBarMenuButton [MFC], CopyFrom
- CMFCToolBarMenuButton [MFC], CreateFromMenu
- CMFCToolBarMenuButton [MFC], CreateMenu
- CMFCToolBarMenuButton [MFC], CreatePopupMenu
- CMFCToolBarMenuButton [MFC], EnableQuickCustomize
- CMFCToolBarMenuButton [MFC], GetCommands
- CMFCToolBarMenuButton [MFC], GetImageRect
- CMFCToolBarMenuButton [MFC], GetPaletteRows
- CMFCToolBarMenuButton [MFC], GetPopupMenu
- CMFCToolBarMenuButton [MFC], HasButton
- CMFCToolBarMenuButton [MFC], HaveHotBorder
- CMFCToolBarMenuButton [MFC], IsBorder
- CMFCToolBarMenuButton [MFC], IsClickedOnMenu
- CMFCToolBarMenuButton [MFC], IsDroppedDown
- CMFCToolBarMenuButton [MFC], IsEmptyMenuAllowed
- CMFCToolBarMenuButton [MFC], IsExclusive
- CMFCToolBarMenuButton [MFC], IsMenuPaletteMode
- CMFCToolBarMenuButton [MFC], IsQuickMode
- CMFCToolBarMenuButton [MFC], IsTearOffMenu
- CMFCToolBarMenuButton [MFC], OnAfterCreatePopupMenu
- CMFCToolBarMenuButton [MFC], OnBeforeDrag
- CMFCToolBarMenuButton [MFC], OnCalculateSize
- CMFCToolBarMenuButton [MFC], OnCancelMode
- CMFCToolBarMenuButton [MFC], OnChangeParentWnd
- CMFCToolBarMenuButton [MFC], OnClick
- CMFCToolBarMenuButton [MFC], OnClickMenuItem
- CMFCToolBarMenuButton [MFC], OnContextHelp
- CMFCToolBarMenuButton [MFC], OnDraw
- CMFCToolBarMenuButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarMenuButton [MFC], OpenPopupMenu
- CMFCToolBarMenuButton [MFC], ResetImageToDefault
- CMFCToolBarMenuButton [MFC], SaveBarState
- CMFCToolBarMenuButton [MFC], Serialize
- CMFCToolBarMenuButton [MFC], SetACCData
- CMFCToolBarMenuButton [MFC], SetMenuOnly
- CMFCToolBarMenuButton [MFC], SetMenuPaletteMode
- CMFCToolBarMenuButton [MFC], SetMessageWnd
- CMFCToolBarMenuButton [MFC], SetRadio
- CMFCToolBarMenuButton [MFC], SetTearOff
- CMFCToolBarMenuButton [MFC], DrawDocumentIcon
- CMFCToolBarMenuButton [MFC], m_bAlwaysCallOwnerDraw
ms.assetid: cfa50176-7e4b-4527-9904-86a1b48fc1bc
ms.openlocfilehash: 7733969a0218dacf481ac82c764911c61ecabbbf
ms.sourcegitcommit: 72583d30170d6ef29ea5c6848dc00169f2c909aa
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/18/2019
ms.locfileid: "58769153"
---
# <a name="cmfctoolbarmenubutton-class"></a>CMFCToolBarMenuButton クラス

ポップアップ メニューを含むツール バー ボタンです。
詳細についてにあるソース コードを参照してください、 **VC\\atlmfc\\src\\mfc** Visual Studio のインストールのフォルダー。

## <a name="syntax"></a>構文

```
class CMFCToolBarMenuButton : public CMFCToolBarButton
```

## <a name="members"></a>メンバー

### <a name="public-constructors"></a>パブリック コンストラクター

|名前|説明|
|----------|-----------------|
|[CMFCToolBarMenuButton::CMFCToolBarMenuButton](#cmfctoolbarmenubutton)|`CMFCToolBarMenuButton` オブジェクトを構築します。|

### <a name="public-methods"></a>パブリック メソッド

|名前|説明|
|----------|-----------------|
|[CMFCToolBarMenuButton::CompareWith](#comparewith)|このインスタンスと指定された`CMFCToolBarButton`オブジェクト。 (上書き[CMFCToolBarButton::CompareWith](../../mfc/reference/cmfctoolbarbutton-class.md#comparewith))。|
|[Cmfctoolbarmenubutton::copyfrom](#copyfrom)|現在のボタンには、別のツール バー ボタンのプロパティをコピーします。 (上書き[CMFCToolBarButton::CopyFrom](../../mfc/reference/cmfctoolbarbutton-class.md#copyfrom))。|
|[CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu)|ツールバーのメニュー Windows メニューのハンドルからを初期化します。|
|[CMFCToolBarMenuButton::CreateMenu](#createmenu)|ツール バー メニュー内のコマンドで構成されている Windows メニューを作成します。 Windows メニューへのハンドルを返します。|
|[CMFCToolBarMenuButton::CreatePopupMenu](#createpopupmenu)|ポップアップ メニュー オブジェクトを作成します ( [CMFCPopupMenu クラス](../../mfc/reference/cmfcpopupmenu-class.md)) ツールバーのメニューを表示します。|
|[CMFCToolBarMenuButton::EnableQuickCustomize](#enablequickcustomize)||
|[CMFCToolBarMenuButton::GetCommands](#getcommands)|ツールバーのメニューにコマンドの一覧への読み取り専用アクセスを提供します。|
|[CMFCToolBarMenuButton::GetImageRect](#getimagerect)|ボタンのイメージの外接する四角形を取得します。|
|[CMFCToolBarMenuButton::GetPaletteRows](#getpaletterows)|メニューがパレット モードの場合は、ポップアップ メニューで行の数を返します。|
|[CMFCToolBarMenuButton::GetPopupMenu](#getpopupmenu)|ボタンに関連付けられているポップアップ メニュー オブジェクトへのポインターを返します。|
|[CMFCToolBarMenuButton::HasButton](#hasbutton)||
|[CMFCToolBarMenuButton::HaveHotBorder](#havehotborder)|ユーザーがボタンを選択したときに、ボタンの境界線を表示するかどうかを判断します。 (上書き[CMFCToolBarButton::HaveHotBorder](../../mfc/reference/cmfctoolbarbutton-class.md#havehotborder))。|
|[CMFCToolBarMenuButton::IsBorder](#isborder)||
|[CMFCToolBarMenuButton::IsClickedOnMenu](#isclickedonmenu)||
|[CMFCToolBarMenuButton::IsDroppedDown](#isdroppeddown)|ポップアップ メニューが表示されるかどうかを判断します。|
|[CMFCToolBarMenuButton::IsEmptyMenuAllowed](#isemptymenuallowed)|ユーザーが選択されたメニュー項目のサブメニューを開くことができるかどうかを判断するためにフレームワークによって呼び出されます。|
|[CMFCToolBarMenuButton::IsExclusive](#isexclusive)|かどうか、ボタンが排他モード、つまり、かどうか、ポップアップ メニューは開いたまま、ユーザーが別のツール バーまたはボタンの上にポインターを移動するときにも決定します。|
|[CMFCToolBarMenuButton::IsMenuPaletteMode](#ismenupalettemode)|ポップアップ メニューがパレット モードかどうかを判断します。|
|[CMFCToolBarMenuButton::IsQuickMode](#isquickmode)||
|[CMFCToolBarMenuButton::IsTearOffMenu](#istearoffmenu)|ポップアップ メニューをティアオフ バーにあるかどうかを判断します。|
|[CMFCToolBarMenuButton::OnAfterCreatePopupMenu](#onaftercreatepopupmenu)||
|[CMFCToolBarMenuButton::OnBeforeDrag](#onbeforedrag)|ボタンをドラッグできるかどうかを指定します。 (上書き[CMFCToolBarButton::OnBeforeDrag](../../mfc/reference/cmfctoolbarbutton-class.md#onbeforedrag))。|
|[CMFCToolBarMenuButton::OnCalculateSize](#oncalculatesize)|指定したデバイス コンテキストおよびドッキング状態のボタンのサイズを計算するためにフレームワークによって呼び出されます。 (上書き[CMFCToolBarButton::OnCalculateSize](../../mfc/reference/cmfctoolbarbutton-class.md#oncalculatesize))。|
|[CMFCToolBarMenuButton::OnCancelMode](#oncancelmode)|処理するためにフレームワークによって呼び出されます、 [WM_CANCELMODE](/windows/desktop/winmsg/wm-cancelmode)メッセージ。 (上書き[CMFCToolBarButton::OnCancelMode](../../mfc/reference/cmfctoolbarbutton-class.md#oncancelmode))。|
|[CMFCToolBarMenuButton::OnChangeParentWnd](#onchangeparentwnd)|新しいツールバーにボタンが挿入されたときに、フレームワークによって呼び出されます。 (上書き[CMFCToolBarButton::OnChangeParentWnd](cmfctoolbarbutton-class.md#onchangeparentwnd))。|
|[CMFCToolBarMenuButton::OnClick](#onclick)|ユーザーがマウス ボタンをクリックすると、フレームワークによって呼び出されます。 (上書き[CMFCToolBarButton::OnClick](../../mfc/reference/cmfctoolbarbutton-class.md#onclick))。|
|[CMFCToolBarMenuButton::OnClickMenuItem](#onclickmenuitem)|ポップアップ メニュー項目を選択すると、フレームワークによって呼び出されます。|
|[CMFCToolBarMenuButton::OnContextHelp](#oncontexthelp)|親ツールバー領域メッセージを処理するときに、フレームワークによって呼び出されます。 (上書き[CMFCToolBarButton::OnContextHelp](../../mfc/reference/cmfctoolbarbutton-class.md#oncontexthelp))。|
|[CMFCToolBarMenuButton::OnDraw](#ondraw)|指定したスタイルとオプションを使用して、ボタンを描画するためにフレームワークによって呼び出されます。 (上書き[CMFCToolBarButton::OnDraw](../../mfc/reference/cmfctoolbarbutton-class.md#ondraw))。|
|[CMFCToolBarMenuButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|ボタンを描画するためにフレームワークによって呼び出されます、**コマンド**のウィンドウ、**カスタマイズ** ダイアログ ボックス。 (上書き[CMFCToolBarButton::OnDrawOnCustomizeList](../../mfc/reference/cmfctoolbarbutton-class.md#ondrawoncustomizelist))。|
|[CMFCToolBarMenuButton::OpenPopupMenu](#openpopupmenu)|ユーザーが、ポップアップ メニューを開いたときに、フレームワークによって呼び出されます。|
|[CMFCToolBarMenuButton::ResetImageToDefault](#resetimagetodefault)|ボタンに関連付けられているイメージを既定値に設定します。 (上書き[CMFCToolBarButton::ResetImageToDefault](../../mfc/reference/cmfctoolbarbutton-class.md#resetimagetodefault))。|
|[CMFCToolBarMenuButton::SaveBarState](#savebarstate)|ツール バー ボタンの状態を保存します。 (上書き[CMFCToolBarButton::SaveBarState](../../mfc/reference/cmfctoolbarbutton-class.md#savebarstate))。|
|[CMFCToolBarMenuButton::Serialize](#serialize)|アーカイブからこのオブジェクトを読み取りまたはアーカイブに書き込みます。 (上書き[CMFCToolBarButton::Serialize](../../mfc/reference/cmfctoolbarbutton-class.md#serialize))。|
|[CMFCToolBarMenuButton::SetACCData](#setaccdata)|設定`CAccessibilityData`ツール バー ボタンのアクセシビリティ データを持つオブジェクト。 (上書き[CMFCToolBarButton::SetACCData](../../mfc/reference/cmfctoolbarbutton-class.md#setaccdata))。|
|[CMFCToolBarMenuButton::SetMenuOnly](#setmenuonly)|ツールバーにボタンを追加できるかどうかを指定します。|
|[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)|ポップアップ メニューがパレット モードかどうかを指定します。|
|[CMFCToolBarMenuButton::SetMessageWnd](#setmessagewnd)||
|[CMFCToolBarMenuButton::SetRadio](#setradio)|ツールバーのメニュー ボタンが選択されていることを示すアイコンが表示を強制します。|
|[CMFCToolBarMenuButton::SetTearOff](#settearoff)|ティアオフを指定します。 ポップアップ メニュー バーの ID。|

### <a name="protected-methods"></a>プロテクト メソッド

|名前|説明|
|----------|-----------------|
|[CMFCToolBarMenuButton::DrawDocumentIcon](#drawdocumenticon)|メニュー ボタンにアイコンを描画します。|

### <a name="data-members"></a>データ メンバー

|名前|説明|
|----------|-----------------|
|[CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw](#m_balwayscallownerdraw)|TRUE の場合、フレームワークは常に呼び出します[CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage)ボタンが描画されます。|

## <a name="remarks"></a>Remarks

A`CMFCToolBarMenuButton`メニューのサブメニューのあるメニュー項目、コマンドを実行しますか、メニューを表示するボタンまたはメニューのみを表示するボタンとして表示できます。 イメージ、テキスト、メニューのハンドルなどのパラメーターを指定して、メニュー ボタンの外観と動作を判断し、コマンド、コンス トラクターでボタンに関連付けられている ID`CMFCToolbarMenuButton::CMFCToolbarMenuButton`します。

派生したカスタム クラス、`CMFCToolbarMenuButton`クラスを使用する必要があります、 [DECLARE_SERIAL](run-time-object-model-services.md#declare_serial)マクロ。 [DECLARE_DYNCREATE](run-time-object-model-services.md#declare_dyncreate)マクロでは、アプリケーションを閉じるときにエラーが生成されます。

## <a name="example"></a>例

次の例は、構成する方法を示します、`CMFCToolBarMenuButton`オブジェクト。 コードは、パレットのモードで、ドロップダウン メニューを指定し、ユーザーがメニュー バーからメニュー ボタンをドラッグしたときに作成されるティアオフ バーの ID を指定する方法を示しています。 このコード スニペットは、 [Word パッド サンプル](../../overview/visual-cpp-samples.md)の一部です。

[!code-cpp[NVC_MFC_WordPad#10](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_1.cpp)]

## <a name="inheritance-hierarchy"></a>継承階層

[CObject](cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

[CMFCToolBarMenuButton](../../mfc/reference/cmfctoolbarmenubutton-class.md)

## <a name="requirements"></a>必要条件

**ヘッダー:** afxtoolbarmenubutton.h

##  <a name="cmfctoolbarmenubutton"></a>  CMFCToolBarMenuButton::CMFCToolBarMenuButton

`CMFCToolBarMenuButton` オブジェクトを構築します。

```
CMFCToolBarMenuButton();
CMFCToolBarMenuButton(const CMFCToolBarMenuButton& src);

CMFCToolBarMenuButton(
    UINT uiID,
    HMENU hMenu,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE);
```

### <a name="parameters"></a>パラメーター

*src*<br/>
[in]既存の`CMFCToolBarMenuButton`オブジェクトにコピーされるこの`CMFCToolBarMenuButton`オブジェクト。

*uiID*<br/>
[in]ユーザーがボタンをクリックしたときに実行するコマンドの IDまたは (UINT)-1 のコマンドを直接実行メニュー ボタンを選択します。

*hMenu*<br/>
[in]メニューへのハンドルまたは、ボタンにメニューがない場合は NULL です。

*画像を*<br/>
[in]ボタンのイメージのインデックスこのボタンは、アイコンがないかで指定されたコマンドのアイコンが使用されますがある場合は-1 *uiID*します。 インデックスが同じ`CMFCToolBarImages`アプリケーション内のオブジェクト。

*lpszText*<br/>
[in]ツールバーのメニュー ボタンのテキスト。

*bUserButton*<br/>
[in]ボタンをユーザー定義のイメージを表示する場合は TRUE。ボタンで指定されたコマンドに関連付けられている定義済みのイメージを表示する場合は FALSE *uiID*します。

### <a name="remarks"></a>Remarks

場合*uiID*は有効ではコマンド ID ボタンは、ユーザーがクリックしたときにそのコマンドを実行します。 場合*hMenu*  メニューの有効なハンドルでは、ボタン、メニューが表示されたら、ツールバーまたはサブメニューに表示されるときにドロップダウン メニューを提供します。 両方*uiID*と*hMenu*が有効で、ボタンが分割ボタンと、ユーザーがクリックしたときに、コマンドを実行する部分とドロップダウン メニューを下向きの矢印の付いた部分とユーザークリックするとします。 ただし場合、 *hMenu*が有効で、ユーザーは、ボタンがメニューに挿入したときにコマンドを実行するボタンをクリックしてできません。

### <a name="example"></a>例

次の例のオブジェクトを構築する方法、`CMFCToolBarMenuButton`クラス。 このコード スニペットは、 [Word パッド サンプル](../../overview/visual-cpp-samples.md)の一部です。

[!code-cpp[NVC_MFC_WordPad#9](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_2.cpp)]

##  <a name="comparewith"></a>  CMFCToolBarMenuButton::CompareWith

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>パラメーター

[in]*他*<br/>

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="copyfrom"></a>  CMFCToolBarMenuButton::CopyFrom

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>パラメーター

[in]*src*<br/>

### <a name="remarks"></a>Remarks

##  <a name="createfrommenu"></a>  CMFCToolBarMenuButton::CreateFromMenu

ツールバーのメニュー Windows メニューのハンドルからを初期化します。

```
virtual void CreateFromMenu(HMENU hMenu);
```

### <a name="parameters"></a>パラメーター

*hMenu*<br/>
[in]メニューへのハンドル。

### <a name="remarks"></a>Remarks

ツールバーのメニュー ボタンには、ドロップダウン リストのサブメニューを表示できます。

フレームワークでは、メニューからサブメニューのコマンドを初期化するためには、このメソッドを呼び出します。

##  <a name="createmenu"></a>  CMFCToolBarMenuButton::CreateMenu

ツールバーのメニューのコマンドで構成されるメニューを作成します。 メニューにハンドルを返します。

```
virtual HMENU CreateMenu() const;
```

### <a name="return-value"></a>戻り値

識別するハンドル メニュー場合成功します。 ツールバーのメニュー ボタンに関連付けられているコマンドの一覧が空の場合は NULL です。

### <a name="remarks"></a>Remarks

メニューの生成方法をカスタマイズする派生クラスでこのメソッドをオーバーライドすることができます。

##  <a name="createpopupmenu"></a>  CMFCToolBarMenuButton::CreatePopupMenu

作成、`CMFCPopupMenu`ツール バー メニューを表示するオブジェクト。

```
virtual CMFCPopupMenu* CreatePopupMenu();
```

### <a name="return-value"></a>戻り値

ポインター、`CMFCPopupMenu`ツールバーのメニュー ボタンに関連付けられているドロップダウン メニューを表示するオブジェクト。

### <a name="remarks"></a>Remarks

このメソッドは、ボタンに関連付けられたドロップダウン メニューの表示を準備するためにフレームワークによって呼び出されます。

既定の実装を構築して、新しい返すだけ`CMFCPopupMenu`オブジェクト。 派生型を使用する場合は、このメソッドをオーバーライド[CMFCPopupMenu クラス](cmfcpopupmenu-class.md)または追加の初期化を実行します。

##  <a name="drawdocumenticon"></a>  CMFCToolBarMenuButton::DrawDocumentIcon

メニュー ボタンには、ドキュメント アイコンを描画します。

```
void DrawDocumentIcon(
    CDC* pDC,
    const CRect& rectImage,
    HICON hIcon);
```

### <a name="parameters"></a>パラメーター

*pDC*<br/>
[in]デバイス コンテキストへのポインター。

*rectImage*<br/>
[in]イメージに外接する四角形の座標。

*hIcon*<br/>
[in]アイコンへのハンドル。

### <a name="remarks"></a>Remarks

このメソッドは、ドキュメント アイコンを受け取りで指定された領域の中央に表示 メニューのボタンを描画*rectImage*します。

##  <a name="enablequickcustomize"></a>  CMFCToolBarMenuButton::EnableQuickCustomize

```
void EnableQuickCustomize();
```

### <a name="remarks"></a>Remarks

##  <a name="hasbutton"></a>  CMFCToolBarMenuButton::HasButton

```
virtual BOOL HasButton() const;
```

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="havehotborder"></a>  CMFCToolBarMenuButton::HaveHotBorder

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="isborder"></a>  CMFCToolBarMenuButton::IsBorder

```
virtual BOOL IsBorder() const;
```

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="isclickedonmenu"></a>  CMFCToolBarMenuButton::IsClickedOnMenu

```
BOOL IsClickedOnMenu() const;
```

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="isquickmode"></a>  CMFCToolBarMenuButton::IsQuickMode

```
BOOL IsQuickMode();
```

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="getcommands"></a>  CMFCToolBarMenuButton::GetCommands

ツールバーのメニューにコマンドの一覧への読み取り専用アクセスを提供します。

```
const CObList& GetCommands() const;
```

### <a name="return-value"></a>戻り値

Const 参照を[CObList クラス](../../mfc/reference/coblist-class.md)のコレクションを含むオブジェクトを[CMFCToolBarButton クラス](../../mfc/reference/cmfctoolbarbutton-class.md)オブジェクト。

### <a name="remarks"></a>Remarks

ツールバーのメニュー ボタンには、サブメニューを表示できます。 コンス トラクターまたはサブメニューにコマンドのリストを提供する[CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu)としてメニュー (HMENU) を識別するハンドル。 派生したオブジェクトの一覧に、メニューが変換されます[CMFCToolBarButton クラス](../../mfc/reference/cmfctoolbarbutton-class.md)内部に格納されていると`CObList`オブジェクト。 この一覧は、このメソッドを呼び出すことによってアクセスできます。

##  <a name="getimagerect"></a>  CMFCToolBarMenuButton::GetImageRect

ボタンのイメージの外接する四角形を取得します。

```
void GetImageRect(CRect& rectImage);
```

### <a name="parameters"></a>パラメーター

*rectImage*<br/>
[out]参照を`CRect`をイメージに外接する四角形の座標を受け取るオブジェクト。

##  <a name="getpaletterows"></a>  CMFCToolBarMenuButton::GetPaletteRows

メニューがパレット モードの場合は、ドロップダウン メニューで行の数を返します。

```
int GetPaletteRows() const;
```

### <a name="return-value"></a>戻り値

パレット内の行の数。

### <a name="remarks"></a>Remarks

メニュー ボタンがパレット モードに設定されている場合は、メニュー項目が一定数の行で複数の列に表示されます。 行の数を取得するには、このメソッドを呼び出します。 有効にするか、パレットのモードを無効にしてを使用して行の数を指定[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)します。

##  <a name="getpopupmenu"></a>  CMFCToolBarMenuButton::GetPopupMenu

ポインターを返します、 [CMFCPopupMenu クラス](../../mfc/reference/cmfcpopupmenu-class.md)ボタンのドロップダウン メニューを表すオブジェクト。

```
CMFCPopupMenu* GetPopupMenu() const;
```

### <a name="return-value"></a>戻り値

ポインターを[CMFCPopupMenu クラス](../../mfc/reference/cmfcpopupmenu-class.md)フレームワーク、ツール バー メニュー ボタン; のサブメニューを描画するときに作成されたオブジェクトサブメニューが表示されない場合は NULL です。

### <a name="remarks"></a>Remarks

ツールバーのメニュー ボタンには、ドロップダウン メニューが表示されたら、ボタンを作成、 [CMFCPopupMenu クラス](../../mfc/reference/cmfcpopupmenu-class.md)メニューを表すオブジェクト。 ポインターを取得するには、このメソッドを呼び出して、`CMFCPopupMenu`オブジェクト。 一時的であり、ユーザーがドロップダウン メニューを閉じると無効になりますので、返されたポインターを格納する必要があります。

##  <a name="isdroppeddown"></a>  CMFCToolBarMenuButton::IsDroppedDown

ポップアップ メニューが現在表示されているかどうかを示します。

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>戻り値

ツールバーのメニュー ボタンにサブメニューが表示される場合は TRUE。それ以外の場合は FALSE です。

##  <a name="isemptymenuallowed"></a>  CMFCToolBarMenuButton::IsEmptyMenuAllowed

メニュー項目が空のサブメニューを表示するかどうかを指定します。

```
virtual BOOL IsEmptyMenuAllowed() const;
```

### <a name="return-value"></a>戻り値

フレームワークでは、サブメニューが空の場合でも、現在選択されているメニュー項目からサブメニューを開く場合は TRUE。それ以外の場合は FALSE です。

### <a name="remarks"></a>Remarks

フレームワークは、ユーザーは、現在選択されているメニュー項目から、サブメニューを開こうとすると、このメソッドを呼び出します。 サブメニューが空の場合と`IsEmptyMenuAllowed`サブメニューが開くことができません FALSE が返されます。

既定の実装では、FALSE を返します。 この動作をカスタマイズするには、このメソッドをオーバーライドします。

##  <a name="isexclusive"></a>  CMFCToolBarMenuButton::IsExclusive

ボタンが排他モードであるかどうかを示します。

```
virtual BOOL IsExclusive() const;
```

### <a name="return-value"></a>戻り値

ボタンが排他モードで動作している場合は TRUE。それ以外の場合は FALSE です。

### <a name="remarks"></a>Remarks

ユーザーは、ボタンのポップアップ メニューを開き、別のツールバーまたはメニュー ボタンにマウス ポインターを移動、ときに、ボタンで排他モードでない限り、ポップアップ メニューを閉じます。

既定の実装を常に FALSE を返します。 排他モードを有効にする場合は、派生クラスでこのメソッドをオーバーライドします。

##  <a name="ismenupalettemode"></a>  CMFCToolBarMenuButton::IsMenuPaletteMode

ドロップダウン メニューがパレット モードかどうかを判断します。

```
BOOL IsMenuPaletteMode() const;
```

### <a name="return-value"></a>戻り値

TRUE の場合、パレットのモードが有効な場合、それ以外の場合は FALSE。

### <a name="remarks"></a>Remarks

メニュー ボタンがパレット モードに設定されている場合は、一定数の行で複数の列にメニュー項目が表示されます。 行の数を取得するには、このメソッドを呼び出します。 有効にするまたは呼び出すことによって、パレットのモードを無効にすることができます[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)します。

##  <a name="istearoffmenu"></a>  CMFCToolBarMenuButton::IsTearOffMenu

ティアオフ バーがドロップダウン メニューにあるかどうかを示します。

```
virtual BOOL IsTearOffMenu() const;
```

### <a name="return-value"></a>戻り値

ツールバーのメニュー ボタン ティアオフ バー; がある場合は TRUE。それ以外の場合は FALSE です。

### <a name="remarks"></a>Remarks

ティアオフ機能を有効にし、ティアオフ設定 ID、バーを呼び出す[CMFCToolBarMenuButton::SetTearOff](#settearoff)します。

##  <a name="m_balwayscallownerdraw"></a>  CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw

フレームワークが常に呼び出すかどうかを指定します。 [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage)ボタンが描画されます。

```
static BOOL m_bAlwaysCallOwnerDraw;
```

### <a name="remarks"></a>Remarks

このメンバー変数が TRUE に設定されている場合、ボタンは常に呼び出します[CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage)ボタンにイメージを表示するメソッド。 ときに`m_bAlwaysCallOwnerDraw`false で、ボタン自体が、イメージは、定義済みの場合、イメージを描画します。 それ以外の場合、呼び出す`OnDrawMenuImage`します。

##  <a name="onaftercreatepopupmenu"></a>  CMFCToolBarMenuButton::OnAfterCreatePopupMenu

```
virtual void OnAfterCreatePopupMenu();
```

### <a name="remarks"></a>Remarks

##  <a name="onbeforedrag"></a>  CMFCToolBarMenuButton::OnBeforeDrag

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="oncalculatesize"></a>  CMFCToolBarMenuButton::OnCalculateSize

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>パラメーター

[in]*pDC*<br/>
[in] *sizeDefault*<br/>
[in] *bHorz*<br/>

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="oncancelmode"></a>  CMFCToolBarMenuButton::OnCancelMode

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Remarks

##  <a name="onchangeparentwnd"></a>  CMFCToolBarMenuButton::OnChangeParentWnd

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>パラメーター

[in] *pWndParent*<br/>

### <a name="remarks"></a>Remarks

##  <a name="onclick"></a>  CMFCToolBarMenuButton::OnClick

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay = TRUE);
```

### <a name="parameters"></a>パラメーター

[in]*我が物*<br/>
[in]*bDelay*<br/>

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="onclickmenuitem"></a>  CMFCToolBarMenuButton::OnClickMenuItem

ユーザーがドロップダウン メニューでアイテムを選択すると、フレームワークによって呼び出されます。

```
virtual BOOL OnClickMenuItem();
```

### <a name="return-value"></a>戻り値

フレームワークを既定のメニュー項目を処理します。 続行する場合は FALSEそれ以外の場合は TRUE です。 既定の実装を常に FALSE を返します。

### <a name="remarks"></a>Remarks

ユーザーは、メニュー項目をクリックすると、フレームワークは、その項目に関連付けられているコマンドを実行します。

メニュー項目の処理をカスタマイズする上書き`OnClickMenuItem`から派生したクラスで`CMFCToolBarMenuButton`クラス。 オーバーライドすることも必要があります[CFrameWndEx::OnShowPopupMenu](../../mfc/reference/cframewndex-class.md#onshowpopupmenu)と派生クラスのインスタンスを持つ特別な処理を必要とするメニュー ボタンを置換します。

##  <a name="oncontexthelp"></a>  CMFCToolBarMenuButton::OnContextHelp

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>パラメーター

[in]*我が物*<br/>

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="ondraw"></a>  CMFCToolBarMenuButton::OnDraw

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz = TRUE,
    BOOL bCustomizeMode = FALSE,
    BOOL bHighlight = FALSE,
    BOOL bDrawBorder = TRUE,
    BOOL bGrayDisabledButtons = TRUE);
```

### <a name="parameters"></a>パラメーター

[in]*pDC*<br/>
[in]*rect*<br/>
[in]*pImages*<br/>
[in] *bHorz*<br/>
[in]*bCustomizeMode*<br/>
[in]*bHighlight*<br/>
[in] *bDrawBorder*<br/>
[in]*bGrayDisabledButtons*<br/>

### <a name="remarks"></a>Remarks

##  <a name="ondrawoncustomizelist"></a>  CMFCToolBarMenuButton::OnDrawOnCustomizeList

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>パラメーター

[in]*pDC*<br/>
[in]*rect*<br/>
[in]*bSelected*<br/>

### <a name="return-value"></a>戻り値

### <a name="remarks"></a>Remarks

##  <a name="openpopupmenu"></a>  CMFCToolBarMenuButton::OpenPopupMenu

ユーザーがツールバーのメニュー ボタンのドロップダウン メニューを開いたときに、フレームワークによって呼び出されます。

```
virtual BOOL OpenPopupMenu(CWnd* pWnd=NULL);
```

### <a name="parameters"></a>パラメーター

*我が物*<br/>
[in]ドロップダウン メニューからコマンドを受信するウィンドウを指定します。 ツールバーのメニューがある親ウィンドウ場合のみ NULL になります。

### <a name="return-value"></a>戻り値

場合、TRUE を[CMFCPopupMenu クラス](../../mfc/reference/cmfcpopupmenu-class.md)オブジェクトが作成され、それ以外の場合、正常に FALSE に開かれます。

### <a name="remarks"></a>Remarks

ユーザーがツールバーのメニュー ボタンからドロップダウン メニューを開いたときに、この関数は、フレームワークによって呼び出されます。

##  <a name="resetimagetodefault"></a>  CMFCToolBarMenuButton::ResetImageToDefault

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Remarks

##  <a name="savebarstate"></a>  CMFCToolBarMenuButton::SaveBarState

```
virtual void SaveBarState();
```

### <a name="remarks"></a>Remarks

フレームワークは、ツール バー ボタンをドラッグ アンド ドロップ操作の結果として作成するときに、このメソッドを呼び出します。 このメソッドは、 [CMFCPopupMenu::SaveState](../../mfc/reference/cmfcpopupmenu-class.md#savestate)トップレベルのポップアップ メニューで、そのメニューを再作成する、ポップアップ メニューのボタンの親のメソッド。

##  <a name="serialize"></a>  CMFCToolBarMenuButton::Serialize

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>パラメーター

[in]*ar*<br/>

### <a name="remarks"></a>Remarks

##  <a name="setaccdata"></a>  CMFCToolBarMenuButton::SetACCData

リボン要素のアクセシビリティ データを設定します。

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>パラメーター

*pParent*<br/>
リボン要素の親ウィンドウ。

*data*<br/>
リボン要素のアクセシビリティ データ。

### <a name="return-value"></a>戻り値

常に TRUE を返します。

### <a name="remarks"></a>Remarks

既定では、このメソッドは、リボン要素のアクセシビリティ データを設定し、常に TRUE を返します。 アクセシビリティ データを設定し、成功または失敗を示す値を返すようにするには、このメソッドをオーバーライドします。

##  <a name="setmenuonly"></a>  CMFCToolBarMenuButton::SetMenuOnly

有効なコマンド ID とサブメニューの両方があるときに、メニュー ボタンまたは分割ボタンとしてボタンを描画するかどうかを指定します。

```
void SetMenuOnly(BOOL bMenuOnly);
```

### <a name="parameters"></a>パラメーター

*bMenuOnly*<br/>
[in]有効なコマンド ID とサブメニューの場合の両方 false の場合、有効なコマンドの ID とサブメニューがあるときに、分割ボタンとしては、このボタンを表示するときに、メニュー ボタンとしては、このボタンを表示する場合は TRUE。

### <a name="remarks"></a>Remarks

通常、ツールバーのメニュー ボタンに、サブメニューで開くとコマンド ID の両方がある場合は、下向きの矢印ボタン メイン ボタンと添付をある分割ボタンのように、メニューが表示されます。 このメソッドを呼び出す場合と*bMenuOnly*が true の場合、ボタンが代わりに、ボタンの下向きの矢印を 1 つのメニュー ボタンのように表示されます。 フレームワークのいずれかのモードでボタンの矢印のない部分がコマンドを実行する、ユーザーがクリックして、ユーザーは、どちらのモードにある矢印をクリックすると、サブメニューが開きます。

##  <a name="setmenupalettemode"></a>  CMFCToolBarMenuButton::SetMenuPaletteMode

ドロップダウン メニューがパレット モードかどうかを指定します。

```
void SetMenuPaletteMode(
    BOOL bMenuPaletteMode=TRUE,
    int nPaletteRows=1);
```

### <a name="parameters"></a>パラメーター

*bMenuPaletteMode*<br/>
[in]ドロップダウン メニューがパレット モードかどうかを指定します。

*nPaletteRows*<br/>
[in]パレット内の行の数。

### <a name="remarks"></a>Remarks

パレット モードでは、すべてのメニュー項目が複数列のパレットとして表示されます。 使用して行の数を指定する*nPaletteRows*します。

##  <a name="setmessagewnd"></a>  CMFCToolBarMenuButton::SetMessageWnd

```
void SetMessageWnd(CWnd* pWndMessage);
```

### <a name="parameters"></a>パラメーター

[in]*pWndMessage*<br/>

### <a name="remarks"></a>Remarks

##  <a name="setradio"></a>  CMFCToolBarMenuButton::SetRadio

オンの場合は、ラジオ ボタンのスタイル アイコンを表示するツールバーのメニュー ボタンを設定します。

```
virtual void SetRadio();
```

### <a name="remarks"></a>Remarks

チェックされているときに、メニュー ボタンが描画されると、呼び出す[CMFCVisualManager::OnDrawMenuCheck](../../mfc/reference/cmfcvisualmanager-class.md#ondrawmenucheck)チェック マーク アイコンを描画するためにします。 既定では、`OnDrawMenuCheck`要求の現在のビジュアル マネージャーが、チェック ボックスを描画メニュー ボタンにチェック マークのスタイルを設定します。 このメソッドを呼び出すと、現在のビジュアル マネージャーは代わりにメニュー ボタンにラジオ ボタンのスタイルのチェック マークを描画します。 この変更を元に戻すことはできません。

このメソッドを呼び出すし、メニュー ボタンが現在表示されて、更新されます。

##  <a name="settearoff"></a>  CMFCToolBarMenuButton::SetTearOff

ドロップダウン メニューをティアオフ バーの ID を指定します。

```
virtual void SetTearOff(UINT uiBarID);
```

### <a name="parameters"></a>パラメーター

*uiBarID*<br/>
[in]新しいティアオフ指定バー ID

### <a name="remarks"></a>Remarks

ユーザーがメニュー バーからメニュー ボタンをドラッグしたときに作成されるティアオフ バーの ID を指定するには、このメソッドを呼び出します。 場合、 *uiBarID*パラメーターが 0 のユーザーがメニュー ボタン ティアオフことはできません場合、。

呼び出す[CWinAppEx::EnableTearOffMenus](../../mfc/reference/cwinappex-class.md#enabletearoffmenus)アプリケーションでティアオフ メニュー機能を有効にします。

## <a name="see-also"></a>関連項目

[階層図](../../mfc/hierarchy-chart.md)<br/>
[クラス](../../mfc/reference/mfc-classes.md)<br/>
[CMFCToolBarButton クラス](../../mfc/reference/cmfctoolbarbutton-class.md)<br/>
[CMFCToolBar クラス](../../mfc/reference/cmfctoolbar-class.md)<br/>
[CMFCPopupMenu クラス](../../mfc/reference/cmfcpopupmenu-class.md)
