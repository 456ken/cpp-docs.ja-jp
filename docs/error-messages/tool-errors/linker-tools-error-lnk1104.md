---
title: リンカ ツール エラー LNK1104
ms.date: 05/17/2017
f1_keywords:
- LNK1104
helpviewer_keywords:
- LNK1104
ms.assetid: 9ca6f929-0efc-4055-8354-3cf5b4e636dc
ms.openlocfilehash: eadeeb7ac19e3975a37a1364502b33400018cb05
ms.sourcegitcommit: 8105b7003b89b73b4359644ff4281e1595352dda
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/14/2019
ms.locfileid: "57818272"
---
# <a name="linker-tools-error-lnk1104"></a>リンカ ツール エラー LNK1104

> ファイルを開くことができません '*filename*'

リンカーは、指定したファイルを開けませんでした。 この問題の最も一般的な原因は、こと、ファイルが使用または別のプロセスによってロックされているが存在しない、リンカーが検索するディレクトリのいずれかで見つからないまたはファイルにアクセスするための十分な権限がないです。 ディスク領域が不足する実行可能性があります、頻度の低い、ファイルが大きすぎる可能性があります、またはファイルへのパスが長すぎる可能性があります。

## <a name="possible-causes-and-solutions"></a>考えられる原因と解決策

このエラーは、リンカーは、読み取りまたは書き込みのいずれかのファイルを開こうとしたときに発生することができます。 考えられる原因を絞り込むためにまずは、ファイルの種類を確認し、識別して、特定の問題を修正するため、次のセクションを使用します。

### <a name="cannot-open-your-app-or-its-pdb-file"></a>アプリまたはその .pdb ファイルを開くことができません。

ファイル名が、実行可能ファイルの場合は、プロジェクトのビルド、または、関連付けられた .pdb ファイルに、最も一般的な原因は、再構築しようとすると、デバッガーが読み込まれて、アプリケーションが既に実行されています。 この問題を解決するには、プログラムを停止し、もう一度それを構築する前に、デバッガーからアドインをアンロードします。 アプリが別のプログラムで開いている場合など、リソース エディターを閉じます。 極端な場合、タスク マネージャーを使用して、またはプロセスを終了し、停止、および Visual Studio を再起動する必要があります。

ウイルス対策プログラムの多くの場合、一時的にブロックへのアクセス新しく作成されたファイル、特に .exe と .dll 実行可能ファイル。 この問題を解決するには、ウイルス対策スキャナーから、プロジェクトのビルド ディレクトリを除外してみてください。

### <a name="cannot-open-a-microsoft-library-file"></a>Microsoft ライブラリ ファイルを開くことができません。

ファイルを開くことができませんが、kernel32.lib など、Microsoft によって提供される標準ライブラリ ファイルのいずれかである場合は、プロジェクトの構成エラーまたはインストール エラーがあります。 Windows SDK がインストールされていることを確認し、プロジェクトには、MFC などの他の Microsoft ライブラリが必要とする場合は、MFC コンポーネントも Visual Studio インストーラーがインストールされていることを確認します。 いつでも省略可能なコンポーネントを追加するには、もう一度インストーラーを実行することができます。 詳細については、[Visual Studio の変更](/visualstudio/install/modify-visual-studio)を参照してください。 インストーラーで、個々 のコンポーネント タブを使用して、特定のライブラリと Sdk を選択します。

以前のバージョンの Visual Studio を使用して作成されたプロジェクトをビルドするいると、プラットフォームのツールセットとそのバージョンのライブラリがインストールしない可能性があります。 Msvcr100.lib などのバージョンのライブラリ名のエラー メッセージが発生した場合、これが原因である可能性がありますは。 この問題を解決する 2 つのオプションがある: をインストールした現在のプラットフォーム ツールセットを使用するプロジェクトをアップグレードするか、以前のツールセットをインストールして、変更されていないプロジェクトをビルドできます。 詳細については、[から旧バージョンの Visual c プロジェクトのアップグレード](../../porting/upgrading-projects-from-earlier-versions-of-visual-cpp.md)と[古いプロジェクトをビルドする Visual Studio でネイティブ マルチ ターゲットを使用](../../porting/use-native-multi-targeting.md)を参照してください。

このエラーが表示されるは、新しいターゲット プラットフォームまたは構成をビルドすると、そのプロジェクトの構成またはプラットフォーム ツールセットのライブラリはインストールできません。 いることを確認、**プラットフォーム ツールセット**と**Windows SDK バージョン**で指定されている、[全般 プロパティ ページ](../../build/reference/general-property-page-project.md)プロジェクトがインストールされ、いることを確認、必要なライブラリが表示されます、**ライブラリ ディレクトリ**で指定されている、 [vc++ Directories Property Page](../../build/reference/vcpp-directories-property-page.md)構成設定。 デバッグ用の個別の設定があるし、32 ビットおよび 64 ビットの構成と同様に小売構成では、1 つのビルドの動作が、エラーを原因別ようにして、設定が正しいとの必要なツールとライブラリがインストールされているすべて構成を作成します。

別のコンピューターからコピーしたプロジェクトをビルドする Visual Studio IDE を使用する場合は、ライブラリのインストールの場所が異なる場合があります。 チェック、**ライブラリ ディレクトリ**プロパティを[vc++ Directories Property Page](../../build/reference/vcpp-directories-property-page.md)プロジェクトの必要に応じて更新します。 表示し、現在のライブラリ パスが IDE で設定の編集を選択用ドロップダウン コントロール、**ライブラリ ディレクトリ**プロパティ選択**編集**します。 **値を評価**のセクション、**ライブラリ ディレクトリ**ダイアログには、ライブラリ ファイルの検索対象の現在のパスが一覧表示されます。

このエラーは、Windows SDK へのパスが古くなっているときにも発生します。 Visual Studio のバージョンより新しい Windows SDK のバージョンをインストールする場合にパスが指定されているように、 [vc++ Directories Property Page](../../build/reference/vcpp-directories-property-page.md)新しい SDK に一致するように更新されます。 開発者コマンド プロンプトを使用する場合は、SDK の新しいパスの環境変数を初期化するバッチ ファイルが更新されることを確認してください。 更新された Sdk をインストールする Visual Studio インストーラーを使用して、この問題を回避できます。

### <a name="cannot-open-a-third-party-library-file"></a>サード パーティ製のライブラリ ファイルを開くことができません。

この問題のいくつかの一般的な原因があります。

- ライブラリ ファイルへのパスが正しくない可能性があります。 またはが指定していないことをリンカーにします。

- ライブラリの 32 ビット バージョンをインストールした可能性がありますが、64 ビット、またはその逆用にビルドします。

- ライブラリがインストールされていないその他のライブラリに依存している可能性があります。

パスの問題を解決するには、LIB 環境変数が設定されているし、ビルドするすべての構成を使用するライブラリのすべてのディレクトリが含まれていますを確認します。 IDE では、LIB 変数は設定、**ライブラリ ディレクトリ**プロパティを[vc++ Directories Property Page](../../build/reference/vcpp-directories-property-page.md)。 すべての構成をビルドするのに必要なライブラリが含まれているすべてのディレクトリがここでは、一覧表示することを確認します。

ライブラリ ディレクトリを指定する必要がある場合は、標準ライブラリのディレクトリをオーバーライドする、使用することができます、 [/LIBPATH](../../build/reference/libpath-additional-libpath.md)オプション、コマンドラインまたは IDE で、使用、**追加のライブラリ ディレクトリ**プロパティで、**構成プロパティ > リンカー > 全般**プロジェクトのプロパティ ページ。

ビルドする構成に必要なライブラリのすべてのバージョンをインストールしたことを確認します。 使用を検討して、 [vcpkg](../../vcpkg.md)パッケージ管理ユーティリティをインストールし、多くの一般的なライブラリのセットアップを自動化します。 可能な場合は、ライブラリが必要とし、プロジェクトと同じ構成の構築されているすべてのローカル依存することを確認していただくことは、サード パーティ製のライブラリの独自のコピーを構築することをお勧めします。

### <a name="cannot-open-a-file-built-by-your-project"></a>プロジェクトによってビルドされたファイルを開くことができません。

場合にこのエラーが発生するファイル*filename*が、ソリューションによってビルドされたが、リンカーが、アクセスしようとしています。 にまだ存在しません。 これは、1 つのプロジェクトは、別のプロジェクトによって異なりますが、プロジェクトが正しい順序でビルドされない場合に発生します。 この問題を解決するには、プロジェクトの参照が要求される前に、不足しているファイルがビルドされたファイルを使用しているプロジェクトで設定されていることを確認します。 詳細については、[Visual c プロジェクトの参照の追加](../../build/adding-references-in-visual-cpp-projects.md)と[プロジェクト内の参照を管理する](/visualstudio/ide/managing-references-in-a-project)を参照してください。

### <a name="cannot-open-file-cprogramobj"></a>ファイルを開くことができません ' c:\\Program.obj'

このエラー、またはドライブのルートで予期しない .obj ファイルに関連するようなエラーを表示する場合、問題がほぼ確実にライブラリ パスを二重引用符にラップされていないにします。

コマンド ライン ビルド用には、この問題を解決するには、確認、 [/LIBPATH](../../build/reference/libpath-additional-libpath.md)パラメーター、LIB 環境変数で指定されたパスと、コマンドラインで指定されたパスのオプションを選択し、任意のパスを二重引用符を使用してくださいスペースが含まれています。

IDE でこの問題を解決するには、確認、**ライブラリ ディレクトリ**プロパティを[構成プロパティ > vc++ ディレクトリ](../../build/reference/vcpp-directories-property-page.md)プロパティ ページで、 **追加のライブラリディレクトリ**プロパティ、**構成プロパティ > リンカー > 全般**プロパティ ページで、**追加の依存関係**プロパティ、**構成プロパティ > リンカー > 入力**プロジェクトのプロパティ ページ。 必要な場合に必要なライブラリが含まれているすべてのディレクトリ パスを二重引用符でラップすることを確認します。

### <a name="other-common-issues"></a>その他の一般的な問題

ライブラリのファイル名またはパスがコマンドラインまたはリンカーに指定した場合、このエラーが発生することができます、 [#pragma comment (lib、"library_name")](../../preprocessor/comment-c-cpp.md)ディレクティブが正しくないか、またはパスが無効なドライブを指定します。 スペルとファイル拡張機能を確認し、指定した場所にファイルが存在することを確認します。

別のプログラムのファイルが開かれている可能性があり、リンカーはそのファイルに書き込めません。 新しく作成されたファイルへのアクセスをブロック一時的に、多くの場合、ウイルス対策プログラムしています。 この問題を解決するには、ウイルス対策スキャナーから、プロジェクトのビルド ディレクトリを除外してみてください。

並列ビルド オプションを使用している場合は、Visual Studio が別のスレッドでファイルをロックしていることができます。 この問題を解決するには、コードの同じオブジェクトまたは複数のプロジェクトにライブラリをビルドしないことと、プロジェクトのビルド済みバイナリを取得するビルドの依存関係またはプロジェクトの参照を使用することを確認します。

個々 のライブラリを指定すると、**追加の依存関係**プロパティを直接スペースを使用して、ライブラリの名前、いないコンマまたはセミコロンで区切ります。 使用する場合、**編集**メニュー項目を開く、**追加の依存関係**ダイアログ ボックスで、名、コンマではない、セミコロン、またはスペースを分割する改行文字を使用します。 内のライブラリ パスを指定する場合に改行文字を使用しても、**ライブラリ ディレクトリ**と**追加のライブラリ ディレクトリ** ダイアログ ボックス。

このエラーが発生する可能性がありますとパス*filename* 260 文字以上に展開されます。 名前を変更するか、必要なファイルへのパスを短縮するために必要な場合に、ディレクトリ構造を再配置。

ファイルが大きすぎるために、このエラーが発生することができます。 ライブラリまたはオブジェクト ファイルのサイズで 1 ギガバイトでは、32 ビット リンカーの問題が生じるよりも大きくします。 この問題の考えられる修正では、64 ビット ツールセットを使用します。 コマンドラインでこれを行う方法の詳細については、次を参照してください。[方法。コマンドラインで 64 ビット Visual C ツールセットを有効にする](../../build/how-to-enable-a-64-bit-visual-cpp-toolset-on-the-command-line.md)します。 これは、IDE で実行する方法については、次を参照してください。 [64 ビットのコンパイラおよびツールを使用して MSBuild](../../build/walkthrough-using-msbuild-to-create-a-visual-cpp-project.md#using-msbuild-to-build-your-project)とこの Stack Overflow の投稿。[Visual Studio のネイティブ amd64 ツール チェーンを使用する方法](http://stackoverflow.com/questions/19820718/how-to-make-visual-studio-use-the-native-amd64-toolchain/23793055)します。

このエラーにアクセスするが不足しているファイルのアクセス許可がある場合に発生する可能性が*filename*します。 これは、ライブラリ ファイルが保護されたシステムのディレクトリにアクセスする通常のユーザー アカウントとの試行を使用するか、元のアクセス許可を持っている他のユーザーからコピーされたファイルを使用する場合に発生することができますを設定します。 この問題を解決するには、ファイルを書き込み可能なプロジェクト ディレクトリに移動します。 ファイルが書き込み可能なディレクトリにアクセスできないアクセス許可を持つ場合は、管理者のコマンド プロンプトを使用して、およびファイルの所有権を取得する takeown.exe コマンドを実行します。

十分なディスク領域を持ち、エラーが発生します。 リンカーが一時ファイルを使用するケースはいくつかあります。 場合でも、十分なディスク領域がある場合は、非常に大きなリンクが消費されます。 または使用可能なディスク領域をフラグメント化できます。 使用を検討して、 [/OPT (最適化)](../../build/reference/opt-optimizations.md)オプション; 行う推移的な COMDAT 除去読み取り、すべてのオブジェクト ファイル複数回です。

場合、 *filename* LNK の名前は*nnn*、一時ファイルのリンカーによって生成されるファイル名は、TMP 環境変数で指定されたディレクトリが存在しない、または複数のディレクトリがありますTMP 環境変数を指定します。 TMP 環境変数の 1 つだけのディレクトリ パスを指定する必要があります。
